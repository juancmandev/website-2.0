---
title: 'Develop a Full-Stack CRUD'
subtitle: 'A full-stack CRUD using Next.js, React.js, TypeScript, TailwindCSS, shadcn/ui and Supabase'
tags: 'Tech'
featuredImage: '/blog/how-computers-works/philipp-katzenberger-iIJrUoeRoCQ-unsplash.jpg'
featuredImageCaption: 'Tech Stack used for this project'
date: '2023-10-28T00:00:00'
author: 'Juan Manzanero'
---

![Tech stack logos](/blog/how-computers-works/philipp-katzenberger-iIJrUoeRoCQ-unsplash.jpg)
_Tech Stack used for this project_

<PostData date='Oct 30, 2023' author='Juan Manzanero' />

# Develop a Full-Stack CRUD

In this blog I'll show you how to create a full-stack [CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) using on of the best tech stacks currently, this is the stack:

- [Next.js](https://nextjs.org/): powerful and flexible meta-framework
- [React.js](https://reactjs.org/): JavaScript library for building user interfaces
- [TypeScript](https://www.typescriptlang.org/): typed superset of JavaScript
- [TailwindCSS](https://tailwindcss.com/): utility-first CSS framework
- [shadcn/ui](https://ui.shadcn.com): collection of reusable components
- [Supabase](https://supabase.io/): open source PostgreSQL Backend as a Service

## Index

0. <LinkToSection href='/en/blog/develop-a-full-stack-crud#0-prerequisites' label='Prerequisites' />
1. <LinkToSection href='/en/blog/develop-a-full-stack-crud#1-overview' label='Overview' />
2. <LinkToSection href='/en/blog/develop-a-full-stack-crud#2-create-the-project' label='Create the project' />
3. <LinkToSection href='/en/blog/develop-a-full-stack-crud#3-add-depencendies' label='Add depencendies' />
    1. <LinkToSection href='/en/blog/develop-a-full-stack-crud#31-shadcnui' label='shadcn/ui' />
    2. <LinkToSection href='/en/blog/develop-a-full-stack-crud#32-supabase' label='Supabase' />
    3. <LinkToSection href='/en/blog/develop-a-full-stack-crud#33-configure-supabase' label='Configure Supabase' />
4. <LinkToSection href='/en/blog/develop-a-full-stack-crud#4-create-the-ui' label='Create the UI' />
    1. <LinkToSection href='/en/blog/develop-a-full-stack-crud#41-not-authorized' label='Not Authorized' />
    2. <LinkToSection href='/en/blog/develop-a-full-stack-crud#42-login' label='Login' />
    3. <LinkToSection href='/en/blog/develop-a-full-stack-crud#43-dashboard' label='Dashboard' />
5. <LinkToSection href='/en/blog/develop-a-full-stack-crud#5-create-a-supabase-local-development-db' label='Create a Supabase local development DB' />

### 0. Prerequisites

- [Node.js](https://nodejs.org/en/) installed
- [npm](https://www.npmjs.com/) installed
- [Git](https://git-scm.com/) installed
- [Supabase](https://supabase.com/) account
- [Docker](https://www.docker.com/) installed
- Knowledge about web development

### 1. Overview

We're going to use Next.js [app router](https://nextjs.org/docs/app), for using the latest features and React server components.

The project will be deployed to [Vercel](https://vercel.com/), but you can use any server side cloud service.

### 2. Create the project

Start for creating a new Next.js project

<CodeBlock title='Terminal' language='bash' code={`npx create-next-app@latest`} />

The terminal will prompt you about the Next.js project configuration, I recommend use the **deault**.

Now **access** to the project directory and **install** the dependencies:

<CodeBlock title='Terminal' language='bash' code={`cd my-app && npm install`} />

### 3. Add depencendies

We'll install **shadcn/ui** and **Supabase**

#### 3.1. shadcn/ui

Let's initialize shadcn/ui first:

<CodeBlock title='Terminal' language='bash' code={`npx shadcn-ui@latest init`} />

The terminal will prompt you about the shadcn/ui configuration:

<CodeBlock title='Terminal' language='bash' code={`Would you like to use TypeScript (recommended)? no / yes
Which style would you like to use? › Default
Which color would you like to use as base color? › Slate
Where is your global CSS file? › › app/globals.css
Do you want to use CSS variables for colors? › no / yes
Where is your tailwind.config.js located? › tailwind.config.js
Configure the import alias for components: › @/components
Configure the import alias for utils: › @/lib/utils
Are you using React Server Components? › no / yes
`} />

You can change this configuration in your *components.json* file.

Now try installing and using one of the shadcn/ui components:

<CodeBlock title='Terminal' language='bash' code={`npx shadcn-ui@latest add button`} />

Go to *src/app/page.tsx*, delete the current content and change it for this:

<CodeBlock title='src/app/page.tsx' language='typescript' code={`import { Button } from '@/components/ui/button'

export default function Home() {
  return (
    <>
      <Button>Click me</Button>
    </>
  )
}
`} />

Run your project, and you should see a button in your localhost:

![Image showing a web view with a styled button](/blog/develop-a-full-stack-crud/button_example.png)

Good job! With shadcn/ui now we can install just the components we need, and customize them with **TailwindCSS**.

You can customize each installed component, for example you can edit *src/components/ui/button.tsx* as you want.

Don't forget to check [shadcn/ui components](https://ui.shadcn.com/docs)

#### 3.2. Supabase

First of all, you need to sign in in [Supabase](https://supabase.com/dashboard/sign-in?).

Create a new free organization, and then a project.

You'll receive the **project URL** and **Project public API key**, save them for later.

Now, install the Supabase JavaScript client and Next.js Auth helper:

<CodeBlock title='Terminal' language='bash' code={`npm install @supabase/supabase-js @supabase/auth-helpers-nextjs`} />

#### 3.3. Configure Supabase

Create a *.env.local* file in the **root** of your project:

<CodeBlock title='.env.local' language='bash' code={`NEXT_PUBLIC_SUPABASE_URL=YOUR_SUPABASE_URL
NEXT_PUBLIC_SUPABASE_ANON_KEY=YOUR_SUPABASE_ANON_KEY`} />

Then, create a *middleware.ts* file inside *src/*, this'll help us protecting routes of the app:

<CodeBlock title='src/middleware.ts' language='typescript' code={`import { createMiddlewareClient } from '@supabase/auth-helpers-nextjs';
import { NextResponse } from 'next/server';

import type { NextRequest } from 'next/server';

export async function middleware(req: NextRequest) {
  const res = NextResponse.next();
  const supabase = createMiddlewareClient({ req, res });

  const {
    data: { user },
  } = await supabase.auth.getUser();

  if (!user && req.nextUrl.pathname === '/dashboard') {
    return NextResponse.redirect(new URL('/login', req.url));
  }

  return res;
}

export const config = {
  matcher: ['/', '/dashboard'],
};
`} />

As you can see, we're setting a middleware for check if the user tries to access to the dashboard, but if the user is not authenticated, then we'll redirect the user to the home page.

Create the dashboard page creating a new directory, the directory must be called as the desired route, in this case **dashboard**, inside the directory we create a *page.tsx* file:

<CodeBlock title='src/pages/dashboard/page.tsx' language='typescript' code={`export default function Dashboard() {
  return (
    <>
      <h1>Dashboard</h1>
    </>
  );
}
`} />

Next.js app router creates this route for us, we'll learn more about this easy way of handling routes.

In your browser try to access to */dashboard*, you should be redirected to the home page.

This is how to protect routes, so any user must be authenticated to access to the dashboard, we'll add more security for our dashboard later.

<CodeBlock title='src/middleware.ts' language='typescript' code={`import { 
  createMiddlewareClient 
} from '@supabase/auth-helpers-nextjs';
import { NextResponse } from 'next/server';

import type { NextRequest } from 'next/server';

export async function middleware(req: NextRequest) {
  const res = NextResponse.next();
  const supabase = createMiddlewareClient({ req, res });

  const {
    data: { user },
  } = await supabase.auth.getUser();

  return res;
}

export const config = {
  matcher: ['/', '/dashboard'],
};
`}  />

We'll do more things in the Supabase dashboard, meanwhile let's create the UI.

### 4. Create the UI

I'll create a simple *home*.

<CodeBlock title='src/app/page.tsx' language='typescript' code={`export default function Home() {
  return (
    <>
      <h1 className='text-2xl font-bold'>Home</h1>
    </>
  );
}
`} />

The header will be using the *Button* component installed before, note that you can infer the styles using *asChild* prop, useful for infering styles in links.

<CodeBlock title='src/components/Header.tsx' language='typescript' code={`import Link from 'next/link';
import { Button } from './ui/button';

export default function Header() {
  return (
    <header className='bg-primary text-primary-foreground border-b border-primary-foreground shadow-lg'>
      <div className='max-w-[1200px] mx-auto p-5 flex justify-between items-center '>
        <section>
          <Button
            asChild
            variant='link'
            className='text-primary-foreground px-0'>
            <Link href='/'>NRTTsS CRUD</Link>
          </Button>
        </section>
        <section>
          <Button asChild variant='secondary'>
            <Link href='/dashboard'>Dashboard</Link>
          </Button>
        </section>
      </div>
    </header>
  );
}
`} />

Add the *Header* component to the layout of our app, and some styles.

<CodeBlock title='src/app/layout.tsx' language='typescript' code={`import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import Header from '@/components/Header';
import './globals.css';

const inter = Inter({ subsets: ['latin'] });

export const metadata: Metadata = {
  title: 'NRTTsS CRUD',
  description:
    'CRUD developed with Next.js, React.js, TypeScript, Tailwindcss, Shadcn/ui and Supabase',
};

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang='en'>
      <body className={inter.className}>
        <Header />
        <main>
          <div className='px-5 py-10 max-w-[1200px] mx-auto'>{children}</div>
        </main>
      </body>
    </html>
  );
}
`} />

The *export const metadata* will add metatags to all the app, improving the SEO.

Next.js will handle the layout in the background, the *children* is every directory with the respective *page.tsx*.

Create new routes:

- /not-authorized
- /login
- /dashboard


#### 4.1. Not Authorized

<CodeBlock title='src/app/not-authorized/page.tsx' language='typescript' code={`import { Button } from '@/components/ui/button';
import Link from 'next/link';

export default function NotAuthorized() {
  return (
    <>
      <h1 className='text-2xl font-bold mb-2'>Not Authorized</h1>
      <Button asChild>
        <Link href='/'>Return to Home</Link>
      </Button>
    </>
  );
}
`} />

#### 4.2. Login

For the login page we'll create a *LoginForm* component, as we're using user events like form submit, the best practice is to separate the component from the page, and add *use client;* directive at the top of the component.

Add the *Form* component from shadcn/ui, then install [Zod](https://zod.dev/) for create validation schemas.

<CodeBlock title='Terminal' language='bash' code={`npx shadcn-ui@latest add form`} />

<CodeBlock title='Terminal' language='bash' code={`npm i zod`} />

Now create the *LoginForm* component.

You can create your own validation schema, here I'll add an **Email** and **Password** values, the Email must be a valid email, and the Password must have at least 8 characters.

You can test this form, you'll see the error messages if you do not complete the form correctly.

The *onSubmit* function will be completed later.

<CodeBlock title='src/components/LoginForm.tsx' language='typescript' code={`'use client';

import * as z from 'zod';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';
import {
  Form,
  FormControl,
  FormDescription,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from '@/components/ui/form';
import { Input } from './ui/input';
import { Button } from './ui/button';

export default function LoginForm() {
  const formSchema = z.object({
    email: z.string().email({
      message: 'Please enter a valid email',
    }),
    password: z.string().min(8, {
      message: 'Password must be at least 8 characters',
    }),
  });

  const form = useForm<z.infer<typeof formSchema>>({
    resolver: zodResolver(formSchema),
    defaultValues: {
      email: '',
      password: '',
    },
  });

  function onSubmit(values: z.infer<typeof formSchema>) {
    console.log(values);
  }

  return (
    <Form {...form}>
      <form
        onSubmit={form.handleSubmit(onSubmit)}
        className='max-w-[300px] space-y-4 mt-8'>
        <FormField
          control={form.control}
          name='email'
          render={({ field }) => (
            <FormItem>
              <FormLabel>Email</FormLabel>
              <FormControl>
                <Input
                  type='email'
                  placeholder='email@example.com'
                  {...field}
                />
              </FormControl>
              <FormDescription>A valid email.</FormDescription>
              <FormMessage />
            </FormItem>
          )}
        />
        <FormField
          control={form.control}
          name='password'
          render={({ field }) => (
            <FormItem>
              <FormLabel>Password</FormLabel>
              <FormControl>
                <Input type='password' {...field} />
              </FormControl>
              <FormDescription>Must be at least 8 characters.</FormDescription>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button className='w-full' type='submit'>
          Submit
        </Button>
      </form>
    </Form>
  );
}
`} />

Import and use the *LoginForm* component in the *login* page.

<CodeBlock title='src/app/login/page.tsx' code={`import LoginForm from '@/components/LoginForm';

export default function Login() {
  return (
    <>
      <h1 className='text-2xl font-bold mb-2'>Login</h1>
      <p>
        You must be logged for access the <strong>Dashboard</strong>.
      </p>
      <p>
        If you do not have an account yet, you can still fulfill the form and a
        new account will be created.
      </p>
      <LoginForm />
    </>
  );
}
`} />

The *login* should look like this:

![Image showing the login page](/blog/develop-a-full-stack-crud/login_example_1.png)

#### 4.3. Dashboard

Create a separete component for the *Dashboard Table*, then import it in the Dashboard page.

The *Dashboard Table* component is complex, install the *Table* component from shadcn/ui.

<CodeBlock title='Terminal' language='bash' code={`npx shadcn-ui@latest add table`} />

The table will show the data, meanwhile we'll use dummy data.

If the user is admin, then the user can edit and delete the data, otherwise the user can only see the data.

Once we configure Supabase, we'll add logic.

> Don't forget to change the **'** to **`** and **#** to **$** in the code.

<CodeBlock title='src/components/DashboardTable.tsx' language='typescript' code={`'use client';

import { useEffect, useState } from 'react';
import {
  Table,
  TableBody,
  TableCaption,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table';
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormMessage,
} from '@/components/ui/form';
import { Input } from './ui/input';
import { StepBack, StepForward, Trash2, Edit, Check, X } from 'lucide-react';
import { Button } from './ui/button';
import * as z from 'zod';
import { useForm } from 'react-hook-form';
import { zodResolver } from '@hookform/resolvers/zod';

const employees = [
  {
    name: 'Jane Cooper',
    role: 'Regional Paradigm Technician',
    salary: 345000,
    startDate: new Date(818035920000).toISOString().split('T')[0],
  },
  {
    name: 'Cody Fisher',
    role: 'Product Directives Officer',
    salary: 245000,
    startDate: new Date(818035920000).toISOString().split('T')[0],
  },
  {
    name: 'Jayden Collins',
    role: 'Corporate Integration Associate',
    salary: 345000,
    startDate: new Date(818035920000).toISOString().split('T')[0],
  },
  {
    name: 'Jane Cooper',
    role: 'Regional Paradigm Technician',
    salary: 345000,
    startDate: new Date(818035920000).toISOString().split('T')[0],
  },
  {
    name: 'Cody Fisher',
    role: 'Product Directives Officer',
    salary: 245000,
    startDate: new Date(818035920000).toISOString().split('T')[0],
  },
];

export default function DashboardTable() {
  const [toEdit, setToEdit] = useState(-1);
  const [currentEmployee, setCurrentEmployee] = useState({
    name: '',
    role: '',
    salary: 0,
    startDate: '',
  });

  const formSchema = z.object({
    name: z.string(),
    role: z.string(),
    salary: z.number(),
    startDate: z.string(),
  });

  const form = useForm<z.infer<typeof formSchema>>({
    resolver: zodResolver(formSchema),
    defaultValues: {
      name: '',
      role: '',
      salary: 0,
      startDate: '',
    },
  });

  useEffect(() => {
    form.reset({
      ...currentEmployee,
    });
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [currentEmployee]);

  function handleSubmit() {
    console.log(form);

    handleEdit(-1);
    setCurrentEmployee({
      name: '',
      role: '',
      salary: 0,
      startDate: '',
    });

    // TODO: Add Supabase logic
  }

  function handleCancel() {
    handleEdit(-1);
    setCurrentEmployee({
      name: '',
      role: '',
      salary: 0,
      startDate: '',
    });
  }

  function handleEdit(index: number) {
    setToEdit(index);
  }

  function handleDelete() {
    // TODO: Add Supabase logic
  }

  return (
    <>
      <Table>
        <TableCaption>A list of current employees.</TableCaption>
        <TableHeader>
          <TableRow>
            <TableHead>Name</TableHead>
            <TableHead>Role</TableHead>
            <TableHead>Start date</TableHead>
            <TableHead>Salary</TableHead>
            <TableHead>Actions</TableHead>
          </TableRow>
        </TableHeader>
        <TableBody>
          {employees.map((employee, index) =>
            toEdit !== index ? (
              // TODO: Change ' for backtrick and # for $
              <TableRow key={'#{employee.name}-#{index}'}>
                <TableCell>{employee.name}</TableCell>
                <TableCell>{employee.role}</TableCell>
                <TableCell>
                  {new Date(employee.startDate).toLocaleDateString()}
                </TableCell>
                <TableCell>
                  {new Intl.NumberFormat('en-US', {
                    style: 'currency',
                    currency: 'USD',
                  }).format(employee.salary)}
                </TableCell>
                <TableCell className='flex gap-4 justify-end items-center'>
                  <Button
                    title='Edit employee'
                    onClick={() => {
                      handleEdit(index);
                      setCurrentEmployee({
                        name: employee.name,
                        role: employee.role,
                        salary: employee.salary,
                        startDate: new Date(employee.startDate)
                          .toISOString()
                          .split('T')[0],
                      });
                    }}
                    className='p-2'
                    variant='secondary'>
                    <Edit />
                  </Button>
                  <Button
                    onClick={handleDelete}
                    title='Delete employee'
                    className='p-2'
                    variant='default'>
                    <Trash2 />
                  </Button>
                </TableCell>
              </TableRow>
            ) : (
               // TODO: Change ' for backtrick and # for $
              <TableRow key={'#{employee.name}-#{index}'}>
                <Form {...form}>
                  <TableCell>
                    <FormField
                      name='name'
                      control={form.control}
                      render={({ field }) => (
                        <FormItem>
                          <FormControl>
                            <Input
                              {...field}
                              type='text'
                              className='w-[120px]'
                            />
                          </FormControl>
                          <FormMessage />
                        </FormItem>
                      )}
                    />
                  </TableCell>
                  <TableCell>
                    <FormField
                      name='role'
                      control={form.control}
                      render={({ field }) => (
                        <FormItem>
                          <FormControl>
                            <Input
                              {...field}
                              type='text'
                              className='w-[240px]'
                            />
                          </FormControl>
                          <FormMessage />
                        </FormItem>
                      )}
                    />
                  </TableCell>
                  <TableCell>
                    <FormField
                      name='startDate'
                      control={form.control}
                      render={({ field }) => (
                        <FormItem>
                          <FormControl>
                            <Input
                              {...field}
                              type='date'
                              className='w-[140px]'
                            />
                          </FormControl>
                          <FormMessage />
                        </FormItem>
                      )}
                    />
                  </TableCell>
                  <TableCell>
                    <FormField
                      name='salary'
                      control={form.control}
                      render={({ field }) => (
                        <FormItem>
                          <FormControl>
                            <Input
                              {...field}
                              type='number'
                              className='w-[120px]'
                            />
                          </FormControl>
                          <FormMessage />
                        </FormItem>
                      )}
                    />
                  </TableCell>
                  <TableCell className='flex gap-4 justify-end items-center'>
                    <Button
                      title='Save changes'
                      onClick={handleSubmit}
                      className='p-2'
                      variant='secondary'>
                      <Check />
                    </Button>
                    <Button
                      title='Cancel changes'
                      onClick={handleCancel}
                      className='p-2'
                      variant='default'>
                      <X />
                    </Button>
                  </TableCell>
                </Form>
              </TableRow>
            )
          )}
        </TableBody>
      </Table>
      <footer className='w-full flex gap-5 justify-end items-center'>
        <Button className='p-2' variant='secondary'>
          <StepBack />
        </Button>
        <div>
          <span>1</span> of <span>10</span>
        </div>
        <Button className='p-2' variant='secondary'>
          <StepForward />
        </Button>
      </footer>
    </>
  );
}
`} />

<CodeBlock title='src/app/dashboard/page.tsx' language='typescript' code={`import DashboardTable from '@/components/DashboardTable';

export default function Dashboard() {
  return (
    <>
      <h1 className='text-2xl font-bold mb-5'>Dashboard</h1>

      <DashboardTable />
    </>
  );
}
`} />

### 5. Create a Supabase local development DB

We'll use Docker for creating a local Supabase development DB, it would be great for testing before deploying to prouction.

Make sure to have installed [Docker Desktop](https://www.docker.com/get-started/) and running.

Install the [Supabase CLI](https://github.com/supabase/cli).

Run the following commands to run a local Supabase instance, make sure to run this commands in the **same** dircetory of your project:

<CodeBlock title='Terminal' language='bash' code='supabase init' />

Then, run the following command, this could take a while:

<CodeBlock title='Terminal' language='bash' code='supabase start' />

You'll get some data, you can check the data anytime with this command:

<CodeBlock title='Terminal' language='bash' code='supabase status' />
